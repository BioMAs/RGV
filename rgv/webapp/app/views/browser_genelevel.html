<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link href="styles/style.css" rel="stylesheet">

<style>
  .vcenter {
    display: inline-block;
    vertical-align: middle;
    float: none;
}

.tdl-holder{
	margin:0px auto;
	width: 300px;
}

.tdl-holder h2{
	background-color: #de3f53;
	border-top-left-radius: 4px;
	border-top-right-radius: 4px;
	color:#fff;
	font-family:"Roboto Condensed", Arial, sans-serif;
	font-size:16px;
	font-weight: 100;
	line-height: 56px;
	padding-left: 15px;
	margin:0;
}

.tdl-holder ul, .tdl-holder li {
	list-style: none;
	margin:0;
	padding:0;
}

.tdl-holder li{
	background-color: #262e4c;
	border-bottom:1px solid #1c2340;
	color: #b1b2c9;
}

.tdl-holder li span{
	margin-left:30px;
	-webkit-transition: all .2s linear;
	   -moz-transition: all .2s linear;
	     -o-transition: all .2s linear;
		    transition: all .2s linear;	
}

.tdl-holder label{
	cursor:pointer;
	display:block;
	line-height: 56px;
	padding: 0 15px; 
	position: relative;
}

.tdl-holder label:hover{
	background-color: #2a3353;
	color:#8284a3;
}

.tdl-holder label a{
	color:#fff;
	display:block;
	float:right;
	font-weight: bold;
	line-height: normal;
	height:16px;
	margin-top: 20px;
	text-align: center;
	text-decoration: none;
	width:16px;
	-webkit-transition: all .2s linear;
	   -moz-transition: all .2s linear;
	     -o-transition: all .2s linear;
		    transition: all .2s linear;	
}


.tdl-holder input[type="checkbox"]{
	cursor: pointer;
	opacity: 0;
	position: absolute;
}

.tdl-holder input[type="checkbox"] + i{
	background-color: #404a6e;
	border-radius: 50%;
	display: block;
	height: 16px;
	position: absolute;
	top:20px;
	width: 16px;	
	z-index: 1;
}

.tdl-holder input[type="checkbox"]:checked + i::after{
	background-color: #6E6E96;
	border-radius: 50%;
	content: '';
	display: block;
	height:8px;
	left:4px;
	position: absolute;
	top:4px;
	width:8px;	
	z-index: 2;
}

.tdl-holder input[type="checkbox"]:checked ~ span{	
	color: #586186;
	text-decoration: line-through;
}

.tdl-holder input[type="text"]{
	background-color: #171d37;
	border: none;
	border-bottom-left-radius: 4px;
	border-bottom-right-radius: 4px;
	box-shadow: inset 0 0 8px 0 #0e1329;
	color: #464f72;
	font-size:14px;
	margin:0;
	padding:20px 15px;
	width:270px;
	-webkit-transition: all .2s linear;
	   -moz-transition: all .2s linear;
	     -o-transition: all .2s linear;
		    transition: all .2s linear;		
}

.tdl-holder input[type="text"]:hover{
	color:#4c577f;
}

.tdl-holder input[type="text"]:focus{
	color:#fff;
}

.tdl-holder ::-webkit-input-placeholder {color: #464f72;} /* WebKit browsers */
.tdl-holder :-moz-placeholder 			{color: #464f72;} /* Mozilla Firefox 4 to 18 */
.tdl-holder ::-moz-placeholder 			{color: #464f72;} /* Mozilla Firefox 19+ */
.tdl-holder :-ms-input-placeholder 		{color: #464f72;} /* Internet Explorer 10+ */



.tdl-holder li.remove{
	-webkit-animation:collapseItem 300ms ease;
			animation:collapseItem 300ms ease;
	-webkit-transform-origin: 50% 0%;
		-ms-transform-origin: 50% 0%;
			transform-origin: 50% 0%;

}

.tdl-holder li.remove span{
	color: #586186;
	text-decoration: line-through;
}

@keyframes collapseItem {
    0% 		{ -ms-transform: perspective(500px) rotateX(0deg);transform: perspective(500px) rotateX(0deg); 	}
    100% 	{ -ms-transform: perspective(500px) rotateX(-90deg);transform: perspective(500px) rotateX(-90deg); }
}

@-webkit-keyframes collapseItem {
    0% 		{ -webkit-transform: perspective(500px) rotateX(0deg); 	}
    100% 	{ -webkit-transform: perspective(500px) rotateX(-90deg);}
}

</style>

<div class="jumbotron" style="margin-top:50px;text-align:center;padding-top: 1px;padding-bottom: 10px;">
	<h2><i class="glyphicon glyphicon-align-left"></i> Gene-level browser</h2>
</div>

<div ng-if="msg.length > 0" class="alert alert-warning" style="z-index:99;">
  <h3>Warning</h3>
  <ul>
    <li ng-repeat='mes in msg'>{{mes}}</li>
  </ul>
</div>
<div ng-if="msgwrn" class="alert alert-danger">
  <h3>ERROR</h3>
	{{msgwrn}}
</div>

<!-- Collapsed Panel  -->
<div class="slide-panel from-left no-touch" style="z-index:95;">
  <header class="panel-header">
      <h2>Select your study</h2>
      <a href="#" class="panel-close"></a>
      {{colfilter}}
    </header>

    <div class="panel-container">
      <div class="panel-content">

        <div class=row><!-- Top grids -->
            <div class="col-md-2">
                <h3>Select tracks</h3>
              </div>
              <div class="col-md-10" style="margin-top: 20px;">
                <form>
                    <div class="input-group">
                        <input ng-model='filterValue' class="form-control" id="inputdefault" type="text">
                        <span class="input-group-btn">
                            <button class="btn btn-default" ng-click='filter()' >Filter</button>
                        </span>
                    </div>
                </form>
              </div>
        </div>

          <div class="row"><!-- Grids -->
              <div class="col-md-4">
                <div id="grid1" ui-grid-selection ui-grid-tree-view ui-grid="main.gridOptions"  width=100%></div>
              </div>
              <div class="col-md-8">
                <div id="grid2" ui-grid-selection ui-grid="second.gridOptions"  width=100%></div>
              </div>
          </div>

      </div> <!-- panel-content -->
    </div> <!-- panel-container -->
</div> <!-- panel -->


<!-- Start page  -->
<div class="row">
  <h2>Step 1 - Select species</h2>
  <hr>
  <div class="row">
      <div class="col-xs-6 col-md-4 col-lg-4 vcenter">
        <div>
          <form>
            <div class="form-group">
              <select class="form-control" ng-model="speciesValue" ng-change="displayStep('step2')">
                <option ng-repeat="spe in species" value="{{spe.tax_id}}">{{spe.name}}</option>
              </select>
            </div>
          </form>
        </div>
      </div><!--
      --><div class="col-xs-6 col-md-8 col-lg-8 vcenter">
          <div class="alert-message alert-message-info">
              <h4><i class="fa fa-info-circle" aria-hidden="true"></i> About</h4>
              <p>Select the species in which you wish to view one or more studies, regardless of the origin species of the study.</p>
          </div>
      </div>
  </div>
</div>

<div class="row" id="step2" style="visibility:hidden;">
  <h2>Step 2 - Chose your genes</h2>
  <hr>
  <div class="row">
      <div class="col-xs-6 col-md-4 col-lg-4">
        <div>
            <form >
                <div class="input-group">
                    <input style="z-index: 0;" class="form-control" name="states" id="states" type="text" placeholder="Select your genes" ng-model="selectedgene"  typeahead-min-length="2" typeahead="item.Symbol for item in get_genes($viewValue,'genes',speciesValue)" typeahead-loading="Loading">
                    <!--<input id="organism_vivo" type="text" ng-model="tissue" placeholder="Tissue" typeahead-min-length="4"  typeahead-on-select="selected_gene($item, $model,label)" typeahead="item.name for item in get_onto($viewValue,'tissue.tab')"  class="form-control" >--> 
                    <span class="input-group-btn">
                        <button style="z-index: 0;" class="btn btn-default" ng-click='select_genes(selectedgene)' >Select</button>
                    </span>
                </div>
            </form>
        </div>
      </div><!--
      --><div class="col-xs-6 col-md-8 col-lg-8">
          <div class="tdl-holder">
              <h2>Selected genes<span style="text-align:right"><b>          {{selected_gene.length}}/5</b></span></h2>
              <div class="tdl-content">
                <ul>
                  <li ng-repeat="gene in selected_gene"><label><i></i><span>{{gene}}</span><a ng-click="remove_genes(gene)"><i class="fa fa-trash" aria-hidden="true"></i></a></label></li>
                </ul>
              </div>
            </div>
      </div>
  </div>
</div>

<div class="row" id="step3" style="visibility:hidden;">
  <h2>Step 3 - Select your studies</h2>
  <hr>
  <div class="row">
      <div class="col-xs-6 col-md-4 col-lg-4">
        <div>
            <form >
                <div class="input-group">
                    <a href="" class="btn panel-open"><button class="btn btn-default">Select study</button></a>
                </div>
            </form>
        </div>
      </div><!--
      --><div class="col-xs-6 col-md-8 col-lg-8">
          <div class="tdl-holder">
              <h2>Selected studies<span style="text-align:right"><b>          {{chosen.length}}/5</b></span></h2>
              <div class="tdl-content">
                <ul>
                  <li ng-repeat="study in chosen"><label><i></i><span>{{study.Study}}</span><!--<a ng-click="remove_study(study)"><i class="fa fa-trash" aria-hidden="true"></i></a>--></label></li>
                </ul>
              </div>
            </div>
      </div>
  </div>
</div>


<div class="row" ng-if="chosen.length != 0">
  <h2>Step 4 - Show results</h2>
  <hr>
  <button class="btn btn-default" ng-click="showGeneLevel(chosen)">Show</button>
</div>


<!-- Footer -->
<div class="row">
		<!--/*div espace bas de page, footer*/-->

		<div class="col-md-3" style="height: 305px">
			<!--/*div gauche*/-->
		</div>
</div>
<script  src="scripts/index.js"></script>